<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta content="width=device-width, initial-scale=1" name="viewport" />
    <meta content="" name="description" />
    <meta content="" name="author" />
    <link href="images/favicon/favicon.ico" rel="shortcut icon" type="image/x-icon" />
    <link rel="apple-touch-icon" sizes="57x57" href="images/favicon/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="images/favicon/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="images/favicon/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="images/favicon/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="images/favicon/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="images/favicon/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="images/favicon/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="images/favicon/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="images/favicon/apple-icon-180x180.png">
    <link rel="icon" type="image/png" sizes="192x192"  href="images/favicon/android-icon-192x192.png">
    <link rel="icon" type="image/png" sizes="32x32" href="images/favicon/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="96x96" href="images/favicon/favicon-96x96.png">
    <link rel="icon" type="image/png" sizes="16x16" href="images/favicon/favicon-16x16.png">
    <link rel="manifest" href="images/favicon/manifest.json">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="images/favicon/ms-icon-144x144.png">
    <meta name="theme-color" content="#ffffff">

    <!--<meta name="google-signin-client_id" content="YOUR_CLIENT_ID.apps.googleusercontent.com">-->
    <title>Aprentio</title>
    <!-- Bootstrap -->
    <link href="css/bootstrap.min.css" rel="stylesheet">

    <!-- Styles -->
    <link href="less/styles.css" rel="stylesheet">

    <!--Fonts -->
    <link href="css/fonts.css" rel="stylesheet">
</head>
<body>
<style>
    #preloader {position:fixed;top:0;left:0;right:0;bottom:0;background-color:#fff;z-index:999999;}
    #status {width:207px;height:207px;position:absolute;left:50%;top:50%;background-image:url(images/loading2.gif);background-repeat:no-repeat;background-position:center top;margin:-105px 0 0 -105px;}
</style>
<div id="preloader"><div id="status"></div></div>
<div id="menu-content"></div>
<div class="separator">
    <div class="container">
        <div class="row">
            <div class="col-md-12">
                Registrarse
            </div>
        </div>
    </div>
</div>
<section id="login-register">
    <div class="up">
        <div class="form-content">
            <div class="container">
                <div class="row">
                    <div class="col-md-12">
                        <div class="form-body">
                            <form id="createForm">
                                <fieldset class="form-group">
                                    <input type="text" class="form-control" id="name">
                                    <label for="name">Nombre</label>
                                    <div class="label-error name-error hidden">Ingresa tu Nombre</div>
                                </fieldset>
                                <fieldset class="form-group">
                                    <input type="text" class="form-control" id="surname">
                                    <label for="surname">Apellido</label>
                                    <div class="label-error surname-error hidden">Ingresa tu Apellido</div>
                                </fieldset>
                                <fieldset class="form-group">
                                    <input type="email" class="form-control" id="email">
                                    <label for="email">Email</label>
                                    <div class="label-error email-error hidden">Ingresa tu Email</div>
                                </fieldset>
                                <fieldset class="form-group">
                                    <input type="password" class="form-control" id="password" autocomplete="password">
                                    <label for="password">Contraseña</label>
                                    <div class="label-error pass-error hidden">Ingresa una contraseña</div>
                                </fieldset>
                                <fieldset class="form-group">
                                    <input type="password" class="form-control" id="password2" autocomplete="password">
                                    <label for="password2">Repita su contraseña</label>
                                    <div class="label-error pass2-error hidden">Repita su contraseña</div>
                                </fieldset>
                                <div class="hidden label-error error-general" role="alert" style="margin-bottom: 40px;">Tus datos son incorrectos</div>
                                <div class="text-center">
                                    <button type="submit" class="btn btn-aprentio">Registrarse</button><!--onclick="_registerUser()-->
                                </div>
                            </form>
                            <div class="btn-sociales">
                                <div>
                                    <a id="fbbutton" href="#"><div id="loginFB" class="fb-login-button" data-max-rows="1" data-size="large" data-show-faces="false" data-auto-logout-link="true" scope="public_profile,email" onlogin="facebookInit();"></div></a>
                                </div>
                                <div class="g-signin2" data-onsuccess="onSignIn"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
<div id="footer-content"></div>

<script src="js/jquery.min.js"></script>
<script src="js/less.js" type="text/javascript"></script>

<!-- Bootstrap -->
<script src="js/bootstrap.min.js"></script>

<!-- Bootbox -->
<script src="js/bootbox.min.js"></script>

<!-- Models & Controllers-->
<script src="js/models/users.js"></script>
<script src="js/controllers/users.js"></script>

<!--<script src="https://apis.google.com/js/platform.js" async defer></script>-->
<script type="text/javascript">
    $(document).ready(function() {
        $(window).bind("load", function () {
            $("#status").fadeOut();
            $("#preloader").delay(450).fadeOut("slow");
        });

        $('#menu-content').load('includes/menu.html');
        $('#footer-content').load('includes/footer.html');

        $('input').on('change', function () {
            if($(this).val() != ''){
                $(this).addClass('label-up');
            }
        }).change();

        window.fbAsyncInit = function() {
            FB.init({
                appId      : '877049032448024',
                cookie     : true,
                xfbml      : true,
                version    : 'v2.8'
            });
            FB.AppEvents.logPageView();
            if (typeof facebookInit == 'function') {
                facebookInit();
            }
        };

        (function(d, s, id){
            var js, fjs = d.getElementsByTagName(s)[0];
            if (d.getElementById(id)) {return;}
            js = d.createElement(s); js.id = id;
            js.src = "//connect.facebook.net/es_LA/sdk.js#xfbml=1&version=v2.8";
            fjs.parentNode.insertBefore(js, fjs);
        }(document, 'script', 'facebook-jssdk'));

        function facebookInit() {
            FB.getLoginStatus(function(response) {
                console.log(response);
                statusChangeCallback(response);
            });
        }

        function statusChangeCallback(response) {
            // Full documentation on FB.getLoginStatus().
            if (response.status === 'connected') {
                console.log('Connected to FB.');
            } else if (response.status === 'not_authorized') {
                console.log("Logged in into FB, but not into Aprentio.");
            } else {
                console.log("Not logged in into FB.");
            }
        }

        /*function onSignIn(googleUser) {
          var profile = googleUser.getBasicProfile();
          console.log('ID: ' + profile.getId()); // Do not send to your backend! Use an ID token instead.
          console.log('Name: ' + profile.getName());
          console.log('Image URL: ' + profile.getImageUrl());
          console.log('Email: ' + profile.getEmail()); // This is null if the 'email' scope is not present.
        }*/

        /*Validacion*/
        var _validateForm = $(function () {
            var error;
            $("#name").removeClass('input-error');
            $("#surname").removeClass('input-error');
            $("#email").removeClass('input-error');
            $("#password").removeClass('input-error');
            $("#password2").removeClass('input-error');

            $(".name-error").addClass('hidden');
            $(".surname-error").addClass('hidden');
            $(".email-error").addClass('hidden');
            $(".pass-error").addClass('hidden');
            $(".pass2-error").addClass('hidden');

            var data = new Object();

            data.name = $("#name").val();
            data.surname = $("#surname").val();
            data.email = $("#email").val();
            data.pass = $("#password").val();
            data.pass2 = $("#password2").val();
            error = false;

            if(data.name == ''){
                $("#name").addClass("input-error");
                $(".name-error").removeClass('hidden');
                error = true;
            }
            if(data.surname == ''){
                $("#surname").addClass("input-error");
                $(".surname-error").removeClass('hidden');
                error = true;
            }
            if(data.email == ''){
                $("#email").addClass("input-error");
                $(".email-error").removeClass('hidden');
                error = true;
            }
            if(data.pass == ''){
                $("#password").addClass("input-error");
                $(".pass-error").removeClass('hidden');
                error = true;
            }
            if(data.pass2 == ''){
                $("#password2").addClass("input-error");
                $(".pass2-error").removeClass('hidden');
                error = true;
            }
            if(data.pass != data.pass2){
                $("#password2").addClass("input-error");
                $(".pass2-error").removeClass('hidden');
                var error = true;
            }
            if(!error){
                $('.error-general').removeClass('hidden');
            }
            return !error;
        })

        var _registerUser = function(){
            if(_validateForm()) {
                _createUser();
                bootbox.alert({
                        title: "&nbsp;",
                        message: '<div style="text-align: center">Se ha registrado con éxito.</div>',
                        className: 'modal-aprentio'
                    });
            }
        };

    });

</script>
</body>
</html>